<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@siggame/colisee-builder</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">@siggame/colisee-builder</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> @siggame/colisee-builder</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="siggame-colisee-builder">siggame/colisee-builder</h1>
				<p>REST Service that builds client code into Docker Images which are then pushed to a Docker Registry.</p>
				<p><a href="https://travis-ci.org/siggame/colisee-builder"><img src="https://img.shields.io/travis/siggame/colisee-builder.svg?style=flat-square" alt="Travis"></a>
					<a href=""><img src="https://img.shields.io/david/siggame/colisee-builder.svg?style=flat-square" alt="David"></a>
					<a href="https://hub.docker.com/r/siggame/colisee-builder/"><img src="https://img.shields.io/docker/pulls/siggame/colisee-builder.svg?style=flat-square" alt="Docker Pulls"></a>
				<a href="https://github.com/siggame/colisee-builder/releases"><img src="https://img.shields.io/github/release/siggame/colisee-builder.svg?style=flat-square" alt="GitHub release"></a></p>
				<h2 id="table-of-contents">Table Of Contents</h2>
				<ul>
					<li><a href="#description">Description</a></li>
					<li><p><a href="#getting-started">Getting Started</a></p>
					</li>
					<li><p><a href="#usage">Usage</a></p>
						<ul>
							<li><a href="#rest-api">REST API</a><ul>
									<li><a href="#interfaces">Interfaces</a></li>
									<li><a href="#api">API</a></li>
								</ul>
							</li>
						</ul>
					</li>
					<li><p><a href="#contributors">Contributors</a></p>
					</li>
					<li><a href="#change-log">Change Log</a></li>
					<li><a href="#license">License</a></li>
					<li><a href="#contributing">Contributing</a></li>
				</ul>
				<h2 id="description">Description</h2>
				<p>The purpose of this application is to provide a service to the ACM SIG-Game Web team to build competitor code. A competitor will log into the Web team&#39;s general user interface and upload a new zip file to submit to the tournament. The Web team will request this service to add this zip file to the queue. The builder will give back a unique ID of the build and the web team will occasionally ping the service to check if the build has finished. When the build has finished, the Web team will retrieve the gamelog as well as the built Docker Image from the service in a reasonable amount of time[1].</p>
				<blockquote>
					<p>[1] Given that the competition is 24 hours, and that a competitor will expect the build to be running in a live environment ASAP, we can assume a reasonable amount time is defined as 5 minutes. At any point in time beyond 5 minutes, the builder service cannot guarantee that the requested data was preserved. Ideally the Web Server will retrieve the data within <strong>5 seconds</strong> of the build being completed.</p>
				</blockquote>
				<h2 id="getting-started">Getting Started</h2>
				<p>Using docker.</p>
				<pre><code class="lang-bash">docker pull siggame/colisee-builder
</code></pre>
				<p>Using npm.</p>
				<pre><code class="lang-bash">npm run setup &amp;&amp; npm run start:prod
</code></pre>
				<h2 id="usage">Usage</h2>
				<h3 id="rest-api">REST API</h3>
				<h4 id="interfaces">Interfaces</h4>
				<p>The following interfaces &amp; types are defined and referenced below in the API endpoints.</p>
				<pre><code class="lang-typescript"><span class="hljs-keyword">type</span> BuildStatusType = <span class="hljs-string">"queued"</span> | <span class="hljs-string">"building"</span> | <span class="hljs-string">"failed"</span> | <span class="hljs-string">"succeeded"</span>;

<span class="hljs-keyword">interface</span> BuildStatus {
    id: <span class="hljs-built_in">string</span>;
    status: BuildStatusType;
    startedTime: DateTime;
    finishedTime: DateTime | <span class="hljs-literal">null</span>;
}

<span class="hljs-comment">// https://www.npmjs.com/package/http-errors</span>
<span class="hljs-keyword">interface</span> HttpError {
    status: <span class="hljs-built_in">number</span>;
    statusCode: <span class="hljs-built_in">string</span>;
    message: <span class="hljs-built_in">string</span>;
}
</code></pre>
				<h4 id="api">API</h4>
				<hr>
				<h4 id="-get-retrieve-status-of-all-builds"><code>GET /</code> Retrieve status of all builds</h4>
				<p>Retrieve the status of all builds. The following query parameters are acceptable.</p>
				<pre><code class="lang-typescript"><span class="hljs-keyword">interface</span> QueryParams {
    <span class="hljs-comment">// Filter by any of the provided statuses</span>
    id: <span class="hljs-built_in">string</span>[];
}
</code></pre>
				<p><strong>200 - Retrieved build status</strong></p>
				<pre><code>{
    <span class="hljs-attribute">statuses</span>: BuildStatus[];
}
</code></pre><p><strong>400 - Bad Request</strong></p>
				<pre><code><span class="hljs-attribute">HttpError</span>
</code></pre><hr>
				<h4 id="-get-id-retrieve-status-of-a-build"><code>GET /{id}</code> Retrieve status of a build</h4>
				<p>Retrieve the status of a build.</p>
				<p><strong>200 - Retrieved build status</strong></p>
				<pre><code>BuildStatus<span class="hljs-comment">;</span>
</code></pre><p><strong>400 - Bad Request; 404 - Not Found</strong></p>
				<pre><code><span class="hljs-attribute">HttpError</span>
</code></pre><hr>
				<h4 id="-get-id-log-retrieve-log-of-a-build"><code>GET /{id}/log</code> Retrieve log of a build</h4>
				<p>Retrieve a log of the build. The built must have status <code>failed</code> or <code>succeeded</code>. Otherwise, endpoint will return a 403 - Forbidden.</p>
				<p><strong>200 - Retrieved log</strong></p>
				<pre><code><span class="hljs-built_in">text</span>/plain
</code></pre><p><strong>404 - Not Found; 400 - Bad Request; 403 - Forbidden</strong></p>
				<pre><code>HttpError<span class="hljs-comment">;</span>
</code></pre><hr>
				<h4 id="-get-id-image-retrieve-built-docker-image-of-a-build"><code>GET /{id}/image</code> Retrieve built docker image of a build</h4>
				<p>Retrieve the built version of the code as a saved docker image. The built must have status <code>succeeded</code>. Otherwise, endpoint will return a 403 - Forbidden.</p>
				<p><strong>200 - Retrieved log</strong></p>
				<pre><code><span class="hljs-built_in">application</span>/zip
</code></pre><p><strong>404 - Not Found; 400 - Bad Request; 403 - Forbidden</strong></p>
				<pre><code>HttpError<span class="hljs-comment">;</span>
</code></pre><hr>
				<h4 id="-post-queue-new-build"><code>POST /</code> Queue new build</h4>
				<p>Push a new build into the queue. The <strong>body</strong> of the request must contain the <strong>ZIP file</strong> of course that is to be built.</p>
				<p><strong>201 - Queued build</strong></p>
				<pre><code>BuildStatus<span class="hljs-comment">;</span>
</code></pre><p><strong>400 - Bad Request; 409 - Conflict</strong></p>
				<pre><code>HttpError<span class="hljs-comment">;</span>
</code></pre><h2 id="contributors">Contributors</h2>
				<ul>
					<li><a href="https://github.com/russleyshaw">Russley Shaw</a></li>
					<li><a href="https://github.com/user404d">user404d</a></li>
					<li><a href="https://github.com/LoneGalaxy">Hannah Reinbolt</a></li>
					<li><a href="https://github.com/MatthewQualls">Matthew Qualls</a></li>
				</ul>
				<h2 id="change-log">Change Log</h2>
				<p>View our <a href="https://github.com/siggame/colisee-builder/blob/master/CHANGELOG.md">CHANGELOG.md</a></p>
				<h2 id="license">License</h2>
				<p>View our <a href="https://github.com/siggame/colisee/blob/master/LICENSE.md">LICENSE.md</a></p>
				<h2 id="contributing">Contributing</h2>
				<p>View our <a href="https://github.com/siggame/colisee/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a></p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_app_.html">"app"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_builder_.html">"builder"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_handlers_.html">"handlers"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_helpers_.html">"helpers"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_index_.html">"index"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_vars_.html">"vars"</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>